{% extends "whalesdb/whale_base.html" %}
{% load bootstrap4 %}
{% load static %}
{% load i18n %}
{% bootstrap_css %}
{% load verbose_names %}

{% block tab_title %}
    {% trans title %}
{% endblock tab_title %}

{% block body %}
    <div class="indent-lg">
        <form class="form" action="#" method="get" id="filter-form">
            <div class="row">

                {% for field in filter.form %}
                    {# {{field.label}}: &nbsp; {{field}}&nbsp;&nbsp; #}
                    <div class="col-2">
                        {% bootstrap_field field placeholder="" size="small" %}
                    </div>

                {% endfor %}
                <div class="col">
                <br>
                    <input type="submit" value="Filter" class="btn btn-warning btn-sm">
                   {% if obj_name %}
                <a href="{% url new_object obj_name %}" class="btn btn-primary btn-sm">Create New</a>
                    {% else %}
                <a href="{% url new_object %}" class="btn btn-primary btn-sm">Create New</a>
                    {% endif %}
                </div>
            </div>
        </form>

        <table class="table table-hover table-sm sortable">
            <thead>
            <tr>
                {% for lbl in fields %}
                <th scope="col">
                    {% trans lbl.label %}
                </th>
                {% endfor %}
            </tr>
            </thead>
            <tbody>

            {% for obj in filter.qs %}
                {% if detail_type == 'emm' %}
                <tr href="{% url detail_object obj.emm.emm_id %}" >
                {% elif detail_type == 'general'%}
                    {% if obj_name %}
                <tr href="{% url detail_object obj_name obj.pk %}">
                    {% else %}
                <tr href="{% url detail_object obj.pk %}" >
                    {% endif %}
                {% else %}
                <tr>
                {% endif %}

                    {% for lbl in fields %}
                    <td>{% get_field_value obj lbl.key %}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <b>
            TOTAL: {{ object_list.count }}
        </b>
    </div>

{% endblock body %}